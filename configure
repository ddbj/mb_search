#!/bin/sh

usage_exit() {
	echo "Usage: $0 [-u URL to ElasticSearch] [-p URL to ElasticSerach ReverseProxy]" 1>&2
	exit 1
}

URL2ES=http://localhost:9200/
URL2RP=
while getopts u:p:h OPT
do
	case $OPT in
		u) URL2ES=$OPTARG
		   ;;
		p) URL2RP=$OPTARG
		   ;;
		h) usage_exit
		   ;;
		\?) usage_exit
		   ;;
	esac
done

echo ElasticSearch is \"${URL2ES}\".
if [ -n "${URL2RP}" ]; then
  echo ReverseProxy is \"${URL2RP}\".
else
  URL2RP=http://${IP}:${PORT}/
fi

cd react_app
eval "echo \"$(cat .env.template)\"" > .env
cd ../data
eval "echo \"$(cat mb-project.inc.template)\"" > mb-project.inc
